(()=>{var e={};e.id=285,e.ids=[285],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6228:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>o}),r(1324),r(8916),r(5866);var t=r(3191),a=r(8716),n=r(7922),i=r.n(n),l=r(5231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(s,d);let o=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1324)),"/Users/vaitahahavya/Projects/morandi/morandi/src/app/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8916)),"/Users/vaitahahavya/Projects/morandi/morandi/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/vaitahahavya/Projects/morandi/morandi/src/app/checkout/page.tsx"],m="/checkout/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7282:(e,s,r)=>{Promise.resolve().then(r.bind(r,2559))},5047:(e,s,r)=>{"use strict";var t=r(7389);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},2559:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>g});var t=r(326),a=r(7577),n=r(5796),i=r(6749);let l=[{id:"cart",name:"Cart Review",description:"Review your items"},{id:"shipping",name:"Shipping",description:"Delivery information"},{id:"payment",name:"Payment",description:"Payment method"},{id:"confirmation",name:"Confirmation",description:"Order complete"}];function d({currentStep:e}){let s=l.findIndex(s=>s.id===e);return t.jsx("div",{className:"mb-8",children:t.jsx("nav",{"aria-label":"Progress",children:t.jsx("ol",{className:"flex items-center",children:l.map((e,r)=>(0,t.jsxs)("li",{className:`relative ${r!==l.length-1?"pr-8 sm:pr-20":""} flex-1`,children:[t.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:t.jsx("div",{className:`h-0.5 w-full ${r<s?"bg-blue-600":"bg-gray-200"}`})}),t.jsx("div",{className:`relative flex h-8 w-8 items-center justify-center rounded-full ${r<s?"bg-blue-600 hover:bg-blue-900":r===s?"bg-blue-600 ring-2 ring-blue-600 ring-offset-2":"bg-white border-2 border-gray-300 group-hover:border-gray-400"}`,children:r<s?t.jsx("svg",{className:"h-5 w-5 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):t.jsx("span",{className:`text-sm font-medium ${r===s?"text-blue-600":"text-gray-500"}`,children:r+1})}),t.jsx("div",{className:"absolute top-10 left-1/2 transform -translate-x-1/2",children:t.jsx("span",{className:`text-xs font-medium ${r<=s?"text-blue-600":"text-gray-500"}`,children:e.name})})]},e.id))})})})}var o=r(6226),c=r(434);function m({cart:e,onNext:s}){let r=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Review Your Cart"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Please review your items before proceeding"})]}),(0,t.jsxs)("div",{className:"p-6",children:[t.jsx("div",{className:"space-y-4",children:e.items.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-4 py-4 border-b border-gray-100 last:border-b-0",children:[t.jsx("div",{className:"relative w-16 h-16 flex-shrink-0",children:t.jsx(o.default,{src:e.image,alt:e.name,fill:!0,className:"object-cover rounded-lg",sizes:"64px"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),e.attributes&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.attributes.material&&t.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:e.attributes.material}),e.attributes.color&&t.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:e.attributes.color}),e.attributes.size&&t.jsx("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:e.attributes.size})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Qty: ",e.quantity]})]}),(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:r((e.salePrice||e.price)*e.quantity)}),e.salePrice&&t.jsx("p",{className:"text-xs text-gray-500 line-through",children:r(e.price*e.quantity)})]})]},e.id))}),t.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{children:["Subtotal (",e.itemCount," items)"]}),t.jsx("span",{children:r(e.subtotal)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Tax (18% GST)"}),t.jsx("span",{children:r(e.tax)})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Shipping"}),t.jsx("span",{children:0===e.shipping?"Free":r(e.shipping)})]}),t.jsx("div",{className:"border-t pt-3",children:(0,t.jsxs)("div",{className:"flex justify-between text-lg font-semibold",children:[t.jsx("span",{children:"Total"}),t.jsx("span",{children:r(e.total)})]})})]})}),(0,t.jsxs)("div",{className:"mt-6 flex justify-between",children:[t.jsx(c.default,{href:"/cart",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back to Cart"}),t.jsx("button",{onClick:s,className:"inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Continue to Shipping"})]})]})]})}function u({onNext:e,onBack:s,initialData:r}){let[n,i]=(0,a.useState)([]),[l,d]=(0,a.useState)(!1),[o,c]=(0,a.useState)(!0),[m,u]=(0,a.useState)(r.shipping_method_id),[x,p]=(0,a.useState)(r.shipping_address||{first_name:"",last_name:"",company:"",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:"India",phone:""}),[h,g]=(0,a.useState)(r.billing_address||{first_name:"",last_name:"",company:"",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:"India",phone:""}),b=(e,s)=>{p(r=>({...r,[e]:s})),o&&g(r=>({...r,[e]:s}))},f=(e,s)=>{g(r=>({...r,[e]:s}))},y=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Shipping Information"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Enter your delivery and billing information"})]}),(0,t.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),!m){alert("Please select a shipping method");return}let r=["first_name","last_name","address_line_1","city","state","postal_code","phone"];for(let e of r)if(!x[e]){alert(`Please fill in the ${e.replace("_"," ")} field`);return}if(!o){for(let e of r)if(!h[e]){alert(`Please fill in the billing ${e.replace("_"," ")} field`);return}}e(x,o?x:h,m)},className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Shipping Method"}),t.jsx("div",{className:"space-y-3",children:n.map(e=>(0,t.jsxs)("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[t.jsx("input",{type:"radio",name:"shipping_method",value:e.id,checked:m===e.id,onChange:e=>u(e.target.value),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:y(e.base_rate)})]}),t.jsx("p",{className:"text-sm text-gray-500",children:e.description}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:["Estimated delivery: ",e.estimated_days," days"]})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Shipping Address"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),t.jsx("input",{type:"text",value:x.first_name,onChange:e=>b("first_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),t.jsx("input",{type:"text",value:x.last_name,onChange:e=>b("last_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),t.jsx("input",{type:"text",value:x.company,onChange:e=>b("company",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),t.jsx("input",{type:"tel",value:x.phone,onChange:e=>b("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1 *"}),t.jsx("input",{type:"text",value:x.address_line_1,onChange:e=>b("address_line_1",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),t.jsx("input",{type:"text",value:x.address_line_2,onChange:e=>b("address_line_2",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),t.jsx("input",{type:"text",value:x.city,onChange:e=>b("city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),t.jsx("input",{type:"text",value:x.state,onChange:e=>b("state",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),t.jsx("input",{type:"text",value:x.postal_code,onChange:e=>b("postal_code",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),t.jsx("input",{type:"text",value:x.country,onChange:e=>b("country",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[t.jsx("input",{type:"checkbox",id:"same_address",checked:o,onChange:e=>c(e.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsx("label",{htmlFor:"same_address",className:"ml-2 text-sm font-medium text-gray-700",children:"Use same address for billing"})]}),!o&&(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-md font-medium text-gray-900 mb-4",children:"Billing Address"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),t.jsx("input",{type:"text",value:h.first_name,onChange:e=>f("first_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!o})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),t.jsx("input",{type:"text",value:h.last_name,onChange:e=>f("last_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!o})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company"}),t.jsx("input",{type:"text",value:h.company,onChange:e=>f("company",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),t.jsx("input",{type:"tel",value:h.phone,onChange:e=>f("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!o})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1 *"}),t.jsx("input",{type:"text",value:h.address_line_1,onChange:e=>f("address_line_1",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!o})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),t.jsx("input",{type:"text",value:h.address_line_2,onChange:e=>f("address_line_2",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),t.jsx("input",{type:"text",value:h.city,onChange:e=>f("city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!o})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),t.jsx("input",{type:"text",value:h.state,onChange:e=>f("state",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!o})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postal Code *"}),t.jsx("input",{type:"text",value:h.postal_code,onChange:e=>f("postal_code",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!o})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),t.jsx("input",{type:"text",value:h.country,onChange:e=>f("country",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("button",{type:"button",onClick:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Back"}),t.jsx("button",{type:"submit",className:"inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Continue to Payment"})]})]})]})}function x({onNext:e,onBack:s,loading:r,error:n,orderData:i}){let[l,d]=(0,a.useState)([]),[o,c]=(0,a.useState)(""),[m,u]=(0,a.useState)(null),x=async s=>{if(s.preventDefault(),!o){alert("Please select a payment method");return}"razorpay"===o?await p():e(o)},p=async()=>{try{let e=document.createElement("script");e.src="https://checkout.razorpay.com/v1/checkout.js",e.async=!0,document.body.appendChild(e),e.onload=()=>{let e={key:process.env.NEXT_PUBLIC_RAZORPAY_KEY_ID,amount:100*(m?.total||0),currency:"INR",name:"Morandi Lifestyle",description:"Sustainable Textile Products",order_id:i.razorpay_order_id,handler:function(e){h(e)},prefill:{name:`${i.shipping_address.first_name} ${i.shipping_address.last_name}`,email:"customer@example.com",contact:i.shipping_address.phone},theme:{color:"#10B981"},modal:{ondismiss:function(){console.log("Payment modal closed")}}};new window.Razorpay(e).open()}}catch(e){console.error("Razorpay payment error:",e)}},h=async s=>{try{let r=await fetch("/api/orders/payment/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({razorpay_order_id:s.razorpay_order_id,razorpay_payment_id:s.razorpay_payment_id,razorpay_signature:s.razorpay_signature,order_id:i.order_id})}),t=await r.json();t.success?e("razorpay"):alert("Payment verification failed: "+t.error)}catch(e){console.error("Payment verification error:",e),alert("Payment verification failed")}},g=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e);return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Payment Method"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose your preferred payment method"})]}),(0,t.jsxs)("form",{onSubmit:x,className:"p-6",children:[t.jsx("div",{className:"mb-6",children:t.jsx("div",{className:"space-y-3",children:l.map(e=>(0,t.jsxs)("label",{className:"flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[t.jsx("input",{type:"radio",name:"payment_method",value:e.id,checked:o===e.id,onChange:e=>c(e.target.value),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),t.jsx("div",{className:"ml-3 flex-1",children:(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-2xl mr-3",children:e.icon}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name}),t.jsx("p",{className:"text-sm text-gray-500",children:e.description})]})]})})]},e.id))})}),m&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[t.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Order Summary"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Subtotal"}),t.jsx("span",{children:g(m.subtotal)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Tax (18% GST)"}),t.jsx("span",{children:g(m.tax)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Shipping"}),t.jsx("span",{children:g(m.shipping)})]}),t.jsx("div",{className:"border-t pt-2",children:(0,t.jsxs)("div",{className:"flex justify-between font-medium",children:[t.jsx("span",{children:"Total"}),t.jsx("span",{children:g(m.total)})]})})]})]}),n&&t.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-700",children:n})})]})}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("button",{type:"button",onClick:s,disabled:r,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Back"}),t.jsx("button",{type:"submit",disabled:r||!o,className:"inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Complete Order"})]})]})]})}function p({orderId:e,orderNumber:s}){return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Order Confirmation"}),t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Thank you for your order!"})]}),t.jsx("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:t.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Order Placed Successfully!"}),t.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Your order has been confirmed and we'll send you an email with tracking information."}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Order ID:"}),t.jsx("p",{className:"text-gray-900",children:e})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Order Number:"}),t.jsx("p",{className:"text-gray-900",children:s})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),t.jsx("p",{className:"text-green-600 font-medium",children:"Confirmed"})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"font-medium text-gray-700",children:"Payment:"}),t.jsx("p",{className:"text-green-600 font-medium",children:"Paid"})]})]})}),(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"What's Next?"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:t.jsx("span",{className:"text-xs font-medium text-blue-600",children:"1"})}),t.jsx("p",{children:"You'll receive an order confirmation email within a few minutes"})]}),(0,t.jsxs)("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:t.jsx("span",{className:"text-xs font-medium text-blue-600",children:"2"})}),t.jsx("p",{children:"We'll process your order and ship it within 1-2 business days"})]}),(0,t.jsxs)("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-0.5",children:t.jsx("span",{className:"text-xs font-medium text-blue-600",children:"3"})}),t.jsx("p",{children:"You'll receive tracking information once your order ships"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[t.jsx(c.default,{href:"/orders",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"View Orders"}),t.jsx(c.default,{href:"/products",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Continue Shopping"})]}),t.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["Need help? Contact our support team at"," ",t.jsx("a",{href:"mailto:support@morandi.com",className:"text-blue-600 hover:text-blue-700",children:"support@morandi.com"})," ","or call us at"," ",t.jsx("a",{href:"tel:+91-1800-123-4567",className:"text-blue-600 hover:text-blue-700",children:"+91-1800-123-4567"})]})})]})})]})}var h=r(5047);function g(){let{cart:e,refreshCart:s}=(0,n.j)();(0,h.useRouter)();let[r,l]=(0,a.useState)({step:"cart",shipping_address:null,billing_address:null,shipping_method_id:"",payment_method:"",order_id:null,razorpay_order_id:null,loading:!1,error:null}),o=()=>{let e=["cart","shipping","payment","confirmation"],s=e.indexOf(r.step);s<e.length-1&&l(r=>({...r,step:e[s+1],error:null}))},c=()=>{let e=["cart","shipping","payment","confirmation"],s=e.indexOf(r.step);s>0&&l(r=>({...r,step:e[s-1],error:null}))},g=(e,s,r)=>{l(t=>({...t,shipping_address:e,billing_address:s,shipping_method_id:r,step:"payment",error:null}))},b=async s=>{if(!r.shipping_address||!r.shipping_method_id){l(e=>({...e,error:"Please complete shipping information first"}));return}l(e=>({...e,payment_method:s,loading:!0,error:null}));try{let t=await fetch("/api/orders/checkout/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e.items.map(e=>({product_id:e.productId,quantity:e.quantity,unit_price:e.salePrice||e.price,total_price:(e.salePrice||e.price)*e.quantity,attributes:e.attributes})),shipping_address:r.shipping_address,billing_address:r.billing_address,shipping_method_id:r.shipping_method_id,payment_method:s})}),a=await t.json();if(!t.ok)throw Error(a.error||"Checkout initialization failed");l(e=>({...e,order_id:a.data.order_id,razorpay_order_id:a.data.razorpay_order_id,step:"confirmation",loading:!1}))}catch(e){l(s=>({...s,error:e instanceof Error?e.message:"Checkout failed",loading:!1}))}};return e.isLoading?(0,t.jsxs)(t.Fragment,{children:[t.jsx(i.default,{}),t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),t.jsx("p",{className:"mt-4 text-gray-600",children:"Loading checkout..."})]})})]}):0===e.items.length?null:(0,t.jsxs)(t.Fragment,{children:[t.jsx(i.default,{}),t.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[t.jsx(d,{currentStep:r.step}),(0,t.jsxs)("div",{className:"mt-8",children:[r.error&&t.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-red-700",children:r.error})})]})}),(()=>{switch(r.step){case"cart":return t.jsx(m,{cart:e,onNext:o});case"shipping":return t.jsx(u,{onNext:g,onBack:c,initialData:{shipping_address:r.shipping_address,billing_address:r.billing_address,shipping_method_id:r.shipping_method_id}});case"payment":return t.jsx(x,{onNext:b,onBack:c,loading:r.loading,error:r.error,orderData:{order_id:r.order_id,razorpay_order_id:r.razorpay_order_id,shipping_address:r.shipping_address,billing_address:r.billing_address,shipping_method_id:r.shipping_method_id}});case"confirmation":return t.jsx(p,{orderId:r.order_id,orderNumber:r.razorpay_order_id});default:return null}})()]})]})})]})}},1324:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(8570).createProxy)(String.raw`/Users/vaitahahavya/Projects/morandi/morandi/src/app/checkout/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[975,928,319],()=>r(6228));module.exports=t})();