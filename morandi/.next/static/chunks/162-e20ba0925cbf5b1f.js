"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{9376:function(e,t,a){var r=a(5475);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},2911:function(e,t,a){a.d(t,{Z:function(){return c}});var r=a(7437),s=a(2265),o=a(3145),n=a(7648),i=a(8422);function l(e){let{product:t,className:a="",variant:o="default"}=e,{addItem:n,cart:l}=(0,i.j)(),[c,d]=(0,s.useState)(1),[u,p]=(0,s.useState)(!1),[m,y]=(0,s.useState)(!1),h=t.stock_quantity>0,x=Math.min(99,t.stock_quantity),g=l.items.some(e=>e.productId===t.id),f=async()=>{if(h){p(!0);try{await n(t,c),y(!0),setTimeout(()=>y(!1),2e3)}catch(e){console.error("Failed to add to cart:",e)}finally{p(!1)}}},b=e=>{e>=1&&e<=x&&d(e)},v=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return"compact"===o?(0,r.jsx)("button",{onClick:f,disabled:!h||u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ".concat(a),children:u?"Adding...":h?"Add to Cart":"Out of Stock"}):"full"===o?(0,r.jsxs)("div",{className:"space-y-4 ".concat(a),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("label",{htmlFor:"quantity",className:"text-sm font-medium text-gray-700",children:"Quantity:"}),(0,r.jsxs)("div",{className:"flex items-center border rounded-lg",children:[(0,r.jsx)("button",{onClick:()=>b(c-1),disabled:c<=1,className:"px-3 py-2 text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,r.jsx)("input",{type:"number",id:"quantity",min:"1",max:x,value:c,onChange:e=>b(parseInt(e.target.value)||1),className:"w-16 text-center border-x py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{onClick:()=>b(c+1),disabled:c>=x,className:"px-3 py-2 text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[x," available"]})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:t.sale_price&&t.sale_price<t.price?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:v(t.sale_price)}),(0,r.jsx)("span",{className:"text-lg text-gray-500 line-through",children:v(t.price)})]}):(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:v(t.price)})}),(0,r.jsx)("button",{onClick:f,disabled:!h||u,className:"w-full py-4 px-6 rounded-lg font-medium text-lg transition-colors ".concat(m?"bg-green-600 text-white":h?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"," ").concat(a),children:u?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding to Cart..."]}):m?(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Added to Cart!"]}):h?g?"Already in Cart":"Add to Cart":"Out of Stock"}),!h&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:"This item is currently out of stock"}),h&&t.stock_quantity<=t.low_stock_threshold&&(0,r.jsxs)("p",{className:"text-sm text-orange-600",children:["Only ",t.stock_quantity," left in stock"]})]}):(0,r.jsxs)("div",{className:"flex items-center gap-3 ".concat(a),children:[(0,r.jsxs)("div",{className:"flex items-center border rounded-lg",children:[(0,r.jsx)("button",{onClick:()=>b(c-1),disabled:c<=1,className:"px-2 py-1 text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),(0,r.jsx)("span",{className:"px-3 py-1 text-sm font-medium min-w-[2rem] text-center",children:c}),(0,r.jsx)("button",{onClick:()=>b(c+1),disabled:c>=x,className:"px-2 py-1 text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),(0,r.jsx)("button",{onClick:f,disabled:!h||u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ".concat(m?"bg-green-600":""),children:u?"Adding...":m?"Added!":h?"Add to Cart":"Out of Stock"})]})}function c(e){var t,a,i,c,d,u;let{product:p}=e,[m,y]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!1),g=(null===(t=p.images)||void 0===t?void 0:t[0])||"/images/placeholder-product.jpg",f=(null===(a=p.images)||void 0===a?void 0:a[1])||g,b=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),v=null===(i=p.attributes)||void 0===i?void 0:i.organic_certified,j=!p.sale_price||p.sale_price>=p.price?null:Math.round((p.price-p.sale_price)/p.price*100);return(0,r.jsx)("div",{className:"group bg-white rounded-lg shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),children:(0,r.jsxs)(n.default,{href:"/products/".concat(p.slug),children:[(0,r.jsxs)("div",{className:"relative aspect-square overflow-hidden bg-gray-100",children:[m?(0,r.jsx)("div",{className:"flex items-center justify-center h-full bg-gray-200",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.default,{src:h&&f!==g?f:g,alt:p.name,fill:!0,className:"object-cover transition-transform duration-300 group-hover:scale-105",onError:()=>y(!0),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"})]}),(0,r.jsxs)("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[v&&(0,r.jsx)("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"Organic"}),j&&(0,r.jsxs)("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:["-",j,"%"]}),p.is_featured&&(0,r.jsx)("span",{className:"bg-yellow-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"Featured"})]}),(0,r.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,r.jsx)("button",{className:"bg-white rounded-full p-2 shadow-md hover:bg-gray-50 transition-colors",onClick:e=>{e.preventDefault()},children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})})]}),(0,r.jsxs)("div",{className:"p-4",children:[p.product_categories&&(0,r.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:p.product_categories.name}),(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors",children:p.name}),p.short_description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:p.short_description}),(0,r.jsx)("div",{className:"flex items-center gap-2 mb-3",children:p.sale_price&&p.sale_price<p.price?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:b(p.sale_price)}),(0,r.jsx)("span",{className:"text-sm text-gray-500 line-through",children:b(p.price)})]}):(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:b(p.price)})}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1 mb-3",children:[(null===(c=p.attributes)||void 0===c?void 0:c.material)&&(0,r.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:p.attributes.material.replace("_"," ")}),(null===(d=p.attributes)||void 0===d?void 0:d.color)&&(0,r.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:p.attributes.color}),(null===(u=p.attributes)||void 0===u?void 0:u.size)&&(0,r.jsx)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:p.attributes.size})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-1",children:p.stock_quantity>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-xs text-gray-600",children:p.stock_quantity>p.low_stock_threshold?"In Stock":"Only ".concat(p.stock_quantity," left")})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),(0,r.jsx)("span",{className:"text-xs text-gray-600",children:"Out of Stock"})]})}),(0,r.jsx)(l,{product:p,variant:"compact"})]})]})]})})}},2496:function(e,t,a){a.d(t,{Z:function(){return s}});var r=a(7437);function s(e){let{size:t="md",className:a=""}=e;return(0,r.jsx)("div",{className:"flex justify-center items-center ".concat(a),children:(0,r.jsx)("div",{className:"animate-spin rounded-full border-b-2 border-primary ".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t])})})}},9500:function(e,t,a){a.d(t,{F:function(){return o}});let r=a(257).env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api";class s{async request(e,t){let a="".concat(r).concat(e),s=await fetch(a,{headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t});if(!s.ok)throw Error("API request failed: ".concat(s.statusText));return s.json()}async getProducts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&""!==r&&t.append(a,String(r))}),this.request("/products?".concat(t.toString()))}async getProduct(e){return this.request("/products/".concat(e))}async getProductsByCategory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URLSearchParams;return Object.entries(t).forEach(e=>{let[t,r]=e;null!=r&&""!==r&&a.append(t,String(r))}),this.request("/products/category/".concat(e,"?").concat(a.toString()))}async getFeaturedProducts(){return this.request("/products/featured/list")}async getRelatedProducts(e){return this.request("/products/related/".concat(e))}async getSearchSuggestions(e){if(!e||e.length<2)return{suggestions:[]};let t=new URLSearchParams({q:e});return this.request("/products/search/suggestions?".concat(t.toString()))}async getCategories(){return this.request("/categories")}async getCategory(e){return this.request("/categories/".concat(e))}async getCategoryProducts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new URLSearchParams;return Object.entries(t).forEach(e=>{let[t,r]=e;null!=r&&""!==r&&a.append(t,String(r))}),this.request("/categories/".concat(e,"/products?").concat(a.toString()))}}let o=new s},8422:function(e,t,a){a.d(t,{CartProvider:function(){return u},j:function(){return p}});var r=a(7437),s=a(2265);let o=a(257).env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api";class n{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(o).concat(e),r={headers:{"Content-Type":"application/json",...t.headers},credentials:"include",...t};try{let e=await fetch(a,r);if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"HTTP error! status: ".concat(e.status))}return await e.json()}catch(e){throw console.error("Cart API error:",e),e}}async getCart(){return this.request("/cart")}async getCartCount(){return this.request("/cart/count")}async addToCart(e){return this.request("/cart/items",{method:"POST",body:JSON.stringify(e)})}async updateCartItem(e,t){return this.request("/cart/items/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async removeCartItem(e){return this.request("/cart/items/".concat(e),{method:"DELETE"})}async clearCart(){return this.request("/cart/clear",{method:"POST"})}async mergeGuestCart(){return this.request("/cart/merge",{method:"POST"})}}let i=new n,l={items:[],subtotal:0,tax:0,shipping:0,total:0,itemCount:0,isLoading:!1,error:null};function c(e,t){switch(t.type){case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload};case"SET_CART":return{...e,items:t.payload.items||[],subtotal:t.payload.subtotal||0,tax:t.payload.tax||0,shipping:t.payload.shipping||0,total:t.payload.total||0,itemCount:t.payload.itemCount||0,error:null};case"ADD_ITEM":let a=e.items.findIndex(e=>e.productId===t.payload.productId);if(!(a>=0))return{...e,items:[...e.items,t.payload]};{let r=[...e.items];return r[a]={...r[a],quantity:r[a].quantity+t.payload.quantity},{...e,items:r}}case"UPDATE_ITEM":return{...e,items:e.items.map(e=>e.id===t.payload.id?{...e,quantity:t.payload.quantity}:e)};case"REMOVE_ITEM":return{...e,items:e.items.filter(e=>e.id!==t.payload)};case"CLEAR_CART":return{...l};default:return e}}let d=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[a,o]=(0,s.useReducer)(c,l);(0,s.useEffect)(()=>{n()},[]),(0,s.useEffect)(()=>{let e=a.items.reduce((e,t)=>e+(t.salePrice||t.price)*t.quantity,0),t=.08*e,r=e>50?0:5.99,s=a.items.reduce((e,t)=>e+t.quantity,0);o({type:"SET_CART",payload:{items:a.items,subtotal:e,tax:t,shipping:r,total:e+t+r,itemCount:s}})},[a.items]);let n=async()=>{try{o({type:"SET_LOADING",payload:!0}),o({type:"SET_ERROR",payload:null});let e=await i.getCart(),t=e.items.map(e=>{var t;return{id:e.id,productId:e.product_id,name:e.product.name,price:e.product.price,salePrice:e.product.sale_price,quantity:e.quantity,image:(null===(t=e.product.images)||void 0===t?void 0:t[0])||"/images/placeholder-product.jpg",stock:e.product.stock_quantity,maxQuantity:Math.min(99,e.product.stock_quantity),slug:e.product.slug,attributes:e.product.attributes}});o({type:"SET_CART",payload:{items:t,subtotal:e.subtotal,tax:e.tax,shipping:e.shipping,total:e.total,itemCount:e.itemCount}})}catch(e){console.error("Failed to refresh cart:",e),o({type:"SET_ERROR",payload:"Failed to load cart"})}finally{o({type:"SET_LOADING",payload:!1})}},u=async(e,t)=>{try{if(o({type:"SET_LOADING",payload:!0}),o({type:"SET_ERROR",payload:null}),t>e.stock_quantity)throw Error("Requested quantity exceeds available stock");await i.addToCart({productId:e.id,quantity:t}),await n()}catch(e){throw console.error("Failed to add item to cart:",e),o({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to add item to cart"}),e}finally{o({type:"SET_LOADING",payload:!1})}},p=async(e,t)=>{try{if(o({type:"SET_LOADING",payload:!0}),o({type:"SET_ERROR",payload:null}),t<=0){await m(e);return}await i.updateCartItem(e,{quantity:t}),await n()}catch(e){throw console.error("Failed to update cart item:",e),o({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to update item quantity"}),e}finally{o({type:"SET_LOADING",payload:!1})}},m=async e=>{try{o({type:"SET_LOADING",payload:!0}),o({type:"SET_ERROR",payload:null}),await i.removeCartItem(e),await n()}catch(e){throw console.error("Failed to remove cart item:",e),o({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to remove item from cart"}),e}finally{o({type:"SET_LOADING",payload:!1})}},y=async()=>{try{o({type:"SET_LOADING",payload:!0}),o({type:"SET_ERROR",payload:null}),await i.clearCart(),o({type:"CLEAR_CART"})}catch(e){throw console.error("Failed to clear cart:",e),o({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to clear cart"}),e}finally{o({type:"SET_LOADING",payload:!1})}},h=async()=>{try{o({type:"SET_LOADING",payload:!0}),o({type:"SET_ERROR",payload:null}),await i.mergeGuestCart(),await n()}catch(e){throw console.error("Failed to merge guest cart:",e),o({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to merge guest cart"}),e}finally{o({type:"SET_LOADING",payload:!1})}};return(0,r.jsx)(d.Provider,{value:{cart:a,addItem:u,updateQuantity:p,removeItem:m,clearCart:y,mergeGuestCart:h,refreshCart:n},children:t})}function p(){let e=(0,s.useContext)(d);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}}]);