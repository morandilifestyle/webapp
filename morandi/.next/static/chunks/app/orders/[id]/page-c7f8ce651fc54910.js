(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[12],{6026:function(e,s,t){Promise.resolve().then(t.bind(t,2104))},9376:function(e,s,t){"use strict";var r=t(5475);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},257:function(e,s,t){"use strict";var r,n;e.exports=(null==(r=t.g.process)?void 0:r.env)&&"object"==typeof(null==(n=t.g.process)?void 0:n.env)?t.g.process:t(4227)},4227:function(e){!function(){var s={229:function(e){var s,t,r,n=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function c(e){if(s===setTimeout)return setTimeout(e,0);if((s===a||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:a}catch(e){s=a}try{t="function"==typeof clearTimeout?clearTimeout:i}catch(e){t=i}}();var d=[],l=!1,o=-1;function u(){l&&r&&(l=!1,r.length?d=r.concat(d):o=-1,d.length&&m())}function m(){if(!l){var e=c(u);l=!0;for(var s=d.length;s;){for(r=d,d=[];++o<s;)r&&r[o].run();o=-1,s=d.length}r=null,l=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===i||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(s){try{return t.call(null,e)}catch(s){return t.call(this,e)}}}(e)}}function x(e,s){this.fun=e,this.array=s}function h(){}n.nextTick=function(e){var s=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)s[t-1]=arguments[t];d.push(new x(e,s)),1!==d.length||l||c(m)},x.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=h,n.addListener=h,n.once=h,n.off=h,n.removeListener=h,n.removeAllListeners=h,n.emit=h,n.prependListener=h,n.prependOnceListener=h,n.listeners=function(e){return[]},n.binding=function(e){throw Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw Error("process.chdir is not supported")},n.umask=function(){return 0}}},t={};function r(e){var n=t[e];if(void 0!==n)return n.exports;var a=t[e]={exports:{}},i=!0;try{s[e](a,a.exports,r),i=!1}finally{i&&delete t[e]}return a.exports}r.ab="//";var n=r(229);e.exports=n}()},2104:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var r=t(7437),n=t(2265),a=t(9376),i=t(8118),c=t(6645);function d(){var e;let s=(0,a.useParams)().id,[t,d]=(0,n.useState)(null),[l,o]=(0,n.useState)(null),[u,m]=(0,n.useState)(!0),[x,h]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=async()=>{try{m(!0);let[e,t]=await Promise.all([(0,i.co)(s),(0,i.DS)(s).catch(()=>null)]);d(e),o(t)}catch(e){h(e instanceof Error?e.message:"Failed to fetch order details")}finally{m(!1)}};s&&e()},[s]);let p=async()=>{if(t&&confirm("Are you sure you want to cancel this order?"))try{await (0,i.sl)(t.id);let e=await (0,i.co)(s);d(e)}catch(e){h(e instanceof Error?e.message:"Failed to cancel order")}},g=async()=>{try{let e=await (0,i._Z)(s);console.log("Invoice data:",e),alert("Invoice download feature coming soon!")}catch(e){h(e instanceof Error?e.message:"Failed to download invoice")}},f=e=>{switch(e){case"pending":return"Pending";case"confirmed":return"Confirmed";case"processing":return"Processing";case"shipped":return"Shipped";case"out_for_delivery":return"Out for Delivery";case"delivered":return"Delivered";case"cancelled":return"Cancelled";case"returned":return"Returned";default:return e}};return u?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-8"}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})})}):x||!t?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:x||"Order not found"})})})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",t.orderNumber]}),(0,r.jsxs)("p",{className:"mt-2 text-gray-600",children:["Placed on ",(0,c.p6)(t.createdAt)]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"processing":return"bg-purple-100 text-purple-800";case"shipped":return"bg-indigo-100 text-indigo-800";case"out_for_delivery":return"bg-orange-100 text-orange-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(t.status)),children:f(t.status)}),(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:(0,c.xG)(t.totalAmount)})]})]})}),x&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-6",children:(0,r.jsx)("p",{className:"text-red-800",children:x})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Order Items"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:null===(e=t.items)||void 0===e?void 0:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:e.productName}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Qty: ",e.quantity]}),e.productSku&&(0,r.jsxs)("p",{className:"text-xs text-gray-400",children:["SKU: ",e.productSku]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[(0,c.xG)(e.unitPrice)," each"]}),(0,r.jsx)("p",{className:"text-sm text-gray-900",children:(0,c.xG)(e.totalPrice)})]})]},e.id))})})]}),l&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Order Timeline"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:l.timeline.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:f(e.status)}),e.description&&(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),e.location&&(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.location}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:(0,c.SY)(e.timestamp)})]})]},s))})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Shipping Information"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Shipping Address"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:[t.shippingAddress.firstName," ",t.shippingAddress.lastName]}),t.shippingAddress.company&&(0,r.jsx)("p",{children:t.shippingAddress.company}),(0,r.jsx)("p",{children:t.shippingAddress.addressLine1}),t.shippingAddress.addressLine2&&(0,r.jsx)("p",{children:t.shippingAddress.addressLine2}),(0,r.jsxs)("p",{children:[t.shippingAddress.city,", ",t.shippingAddress.state," ",t.shippingAddress.postalCode]}),(0,r.jsx)("p",{children:t.shippingAddress.country}),t.shippingAddress.phone&&(0,r.jsxs)("p",{children:["Phone: ",t.shippingAddress.phone]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Billing Address"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:[t.billingAddress.firstName," ",t.billingAddress.lastName]}),t.billingAddress.company&&(0,r.jsx)("p",{children:t.billingAddress.company}),(0,r.jsx)("p",{children:t.billingAddress.addressLine1}),t.billingAddress.addressLine2&&(0,r.jsx)("p",{children:t.billingAddress.addressLine2}),(0,r.jsxs)("p",{children:[t.billingAddress.city,", ",t.billingAddress.state," ",t.billingAddress.postalCode]}),(0,r.jsx)("p",{children:t.billingAddress.country}),t.billingAddress.phone&&(0,r.jsxs)("p",{children:["Phone: ",t.billingAddress.phone]})]})]})]})})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Order Summary"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Subtotal"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,c.xG)(t.subtotal)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Tax"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,c.xG)(t.taxAmount)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Shipping"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:(0,c.xG)(t.shippingAmount)})]}),t.discountAmount>0&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Discount"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-red-600",children:["-",(0,c.xG)(t.discountAmount)]})]}),(0,r.jsx)("div",{className:"border-t border-gray-200 pt-3",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-base font-medium text-gray-900",children:"Total"}),(0,r.jsx)("span",{className:"text-base font-bold text-gray-900",children:(0,c.xG)(t.totalAmount)})]})})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Payment Information"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Payment Method"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.paymentMethod})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Payment Status"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat("paid"===t.paymentStatus?"text-green-600":"text-yellow-600"),children:t.paymentStatus.charAt(0).toUpperCase()+t.paymentStatus.slice(1)})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Order Actions"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:g,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Download Invoice"}),("pending"===t.status||"confirmed"===t.status)&&(0,r.jsx)("button",{onClick:p,className:"w-full px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Cancel Order"}),"delivered"===t.status&&(0,r.jsx)("a",{href:"/orders/".concat(t.id,"/return"),className:"block w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 text-center",children:"Request Return"}),(0,r.jsx)("button",{onClick:()=>{},className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:"Reorder Items"})]})})]}),l&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Tracking Information"})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Tracking Number"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:l.trackingNumber})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Courier"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:l.courierName})]}),l.estimatedDelivery&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Estimated Delivery"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(0,c.p6)(l.estimatedDelivery)})]}),l.location&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Current Location"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:l.location})]})]})})]})]})]})]})})}},8118:function(e,s,t){"use strict";t.d(s,{DS:function(){return i},_Z:function(){return d},co:function(){return a},sl:function(){return c},uI:function(){return n}});let r=t(257).env.NEXT_PUBLIC_API_URL||"http://localhost:3001/api";async function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=arguments.length>2?arguments[2]:void 0,n=new URLSearchParams({page:e.toString(),limit:s.toString()});(null==t?void 0:t.status)&&n.append("status",t.status),(null==t?void 0:t.search)&&n.append("search",t.search),(null==t?void 0:t.startDate)&&n.append("startDate",t.startDate),(null==t?void 0:t.endDate)&&n.append("endDate",t.endDate);let a=await fetch("".concat(r,"/orders?").concat(n),{headers:{"Content-Type":"application/json","user-id":"test-user-id"}});if(!a.ok)throw Error("Failed to fetch orders");return a.json()}async function a(e){let s=await fetch("".concat(r,"/orders/").concat(e),{headers:{"Content-Type":"application/json","user-id":"test-user-id"}});if(!s.ok)throw Error("Failed to fetch order");return(await s.json()).order}async function i(e){let s=await fetch("".concat(r,"/orders/").concat(e,"/tracking"),{headers:{"Content-Type":"application/json","user-id":"test-user-id"}});if(!s.ok)throw Error("Failed to fetch order tracking");return(await s.json()).data}async function c(e,s){let t=await fetch("".concat(r,"/orders/").concat(e,"/cancel"),{method:"POST",headers:{"Content-Type":"application/json","user-id":"test-user-id"},body:JSON.stringify({reason:s})});if(!t.ok)throw Error((await t.json()).error||"Failed to cancel order")}async function d(e){let s=await fetch("".concat(r,"/orders/").concat(e,"/invoice"),{headers:{"Content-Type":"application/json","user-id":"test-user-id"}});if(!s.ok)throw Error("Failed to download invoice");return(await s.json()).data}},6645:function(e,s,t){"use strict";function r(e){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(e)}function n(e){let s="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)}function a(e){let s="string"==typeof e?new Date(e):e,t=Math.floor((new Date().getTime()-s.getTime())/1e3);if(t<60)return"Just now";if(t<3600){let e=Math.floor(t/60);return"".concat(e," minute").concat(e>1?"s":""," ago")}if(t<86400){let e=Math.floor(t/3600);return"".concat(e," hour").concat(e>1?"s":""," ago")}{if(!(t<2592e3))return function(e){let s="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric"}).format(s)}(s);let e=Math.floor(t/86400);return"".concat(e," day").concat(e>1?"s":""," ago")}}t.d(s,{SY:function(){return a},p6:function(){return n},xG:function(){return r}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=6026)}),_N_E=e.O()}]);