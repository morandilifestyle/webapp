(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{6039:function(e,s,t){Promise.resolve().then(t.bind(t,1033))},1033:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(7437),r=t(2265),l=t(9376),i=t(9500),n=t(2911);function c(e){var s;let{filters:t,onFilterChange:l}=e,[i,n]=(0,r.useState)({min:t.minPrice||0,max:t.maxPrice||500}),c=[{value:"organic_cotton",label:"Organic Cotton"},{value:"bamboo",label:"Bamboo"},{value:"bamboo_blend",label:"Bamboo Blend"},{value:"recycled_polyester",label:"Recycled Polyester"}],o=(e,s)=>{let t={...i,[e]:s};n(t),setTimeout(()=>{l({minPrice:t.min>0?t.min:void 0,maxPrice:t.max<500?t.max:void 0})},500)},d=e=>{l({material:e})},m=e=>{l({organicCertified:e})},x=e=>{l({featured:e})},u=t.minPrice||t.maxPrice||t.material||t.organicCertified||t.featured;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Filters"}),u&&(0,a.jsx)("button",{onClick:()=>{l({minPrice:void 0,maxPrice:void 0,material:void 0,organicCertified:void 0,featured:void 0}),n({min:0,max:500})},className:"text-sm text-blue-600 hover:text-blue-800",children:"Clear All"})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Price Range"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Min Price"}),(0,a.jsx)("input",{type:"number",min:"0",max:i.max,value:i.min,onChange:e=>o("min",Number(e.target.value)),className:"input input-bordered input-sm w-full",placeholder:"0"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{className:"block text-xs text-gray-600 mb-1",children:"Max Price"}),(0,a.jsx)("input",{type:"number",min:i.min,max:"1000",value:i.max,onChange:e=>o("max",Number(e.target.value)),className:"input input-bordered input-sm w-full",placeholder:"500"})]})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["$",i.min," - $",i.max]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Material"}),(0,a.jsxs)("div",{className:"space-y-2",children:[c.map(e=>(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"material",value:e.value,checked:t.material===e.value,onChange:()=>d(e.value),className:"radio radio-primary radio-sm"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:e.label})]},e.value)),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"material",value:"",checked:!t.material,onChange:()=>d(""),className:"radio radio-primary radio-sm"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"All Materials"})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Certification"}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.organicCertified||!1,onChange:e=>m(e.target.checked),className:"checkbox checkbox-primary checkbox-sm"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Organic Certified Only"})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Product Type"}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:t.featured||!1,onChange:e=>x(e.target.checked),className:"checkbox checkbox-primary checkbox-sm"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Featured Products Only"})]})]}),u&&(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Active Filters"}),(0,a.jsxs)("div",{className:"space-y-1",children:[t.minPrice&&(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Min Price: $",t.minPrice]}),t.maxPrice&&(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Max Price: $",t.maxPrice]}),t.material&&(0,a.jsxs)("div",{className:"text-xs text-gray-600",children:["Material: ",null===(s=c.find(e=>e.value===t.material))||void 0===s?void 0:s.label]}),t.organicCertified&&(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Organic Certified Only"}),t.featured&&(0,a.jsx)("div",{className:"text-xs text-gray-600",children:"Featured Products Only"})]})]})]})}function o(e){let{initialValue:s="",onSearch:t}=e,[l,n]=(0,r.useState)(s),[c,o]=(0,r.useState)([]),[d,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(!1),h=(0,r.useRef)(),g=(0,r.useRef)(null);(0,r.useEffect)(()=>(h.current&&clearTimeout(h.current),l.length>=2?(u(!0),h.current=setTimeout(async()=>{try{let e=await i.F.getSearchSuggestions(l);o(e.suggestions),m(!0)}catch(e){console.error("Error fetching suggestions:",e),o([])}finally{u(!1)}},300)):(o([]),m(!1)),()=>{h.current&&clearTimeout(h.current)}),[l]),(0,r.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let p=e=>{n(e.name),t(e.name),m(!1)};return(0,a.jsxs)("div",{className:"relative",ref:g,children:[(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),t(l),m(!1)},children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),onKeyDown:e=>{"Escape"===e.key&&m(!1)},placeholder:"Search products...",className:"input input-bordered w-full pr-10"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:x?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}):(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),d&&c.length>0&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:c.map((e,s)=>(0,a.jsxs)("button",{onClick:()=>p(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 focus:bg-gray-50 focus:outline-none border-b border-gray-100 last:border-b-0",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),e.short_description&&(0,a.jsx)("div",{className:"text-sm text-gray-600 mt-1 line-clamp-1",children:e.short_description})]},s))}),d&&l.length>=2&&0===c.length&&!x&&(0,a.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg",children:(0,a.jsxs)("div",{className:"px-4 py-3 text-gray-500",children:['No products found for "',l,'"']})})]})}function d(e){var s,t;let{categories:l,selectedCategory:i,selectedSubcategory:n,onCategorySelect:c}=e,[o,d]=(0,r.useState)(new Set),m=e=>{let s=new Set(o);s.has(e)?s.delete(e):s.add(e),d(s)},x=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s){var t;c(e.parent_id?null===(t=l.find(s=>s.id===e.parent_id))||void 0===t?void 0:t.slug:void 0,e.slug)}else c(e.slug,void 0)},u=e=>i===e.slug,h=e=>n===e.slug,g=e=>l.filter(s=>s.parent_id===e),p=l.filter(e=>!e.parent_id);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Categories"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("button",{onClick:()=>c(void 0,void 0),className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(i||n?"text-gray-700 hover:bg-gray-100":"bg-blue-100 text-blue-700"),children:"All Products"}),p.map(e=>{let s=g(e.id),t=o.has(e.slug),r=u(e),l=s.some(e=>h(e));return(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>{s.length>0?m(e.slug):x(e)},className:"w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors flex items-center justify-between ".concat(r||l?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)("span",{children:e.name}),s.length>0&&(0,a.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(t?"rotate-90":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),s.length>0&&t&&(0,a.jsx)("div",{className:"ml-4 mt-1 space-y-1",children:s.map(e=>(0,a.jsx)("button",{onClick:()=>x(e,!0),className:"w-full text-left px-3 py-2 rounded-md text-sm transition-colors ".concat(h(e)?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50"),children:e.name},e.id))})]},e.id)})]}),i&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"Currently viewing:"}),(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[null===(s=l.find(e=>e.slug===i))||void 0===s?void 0:s.name,n&&(0,a.jsxs)(a.Fragment,{children:[" > ",null===(t=l.find(e=>e.slug===n))||void 0===t?void 0:t.name]})]})]})]})}var m=t(5240),x=t(2496);function u(){var e,s,t,u,h;let g=(0,l.useSearchParams)(),p=(0,l.useRouter)(),[b,v]=(0,r.useState)([]),[j,f]=(0,r.useState)([]),[y,N]=(0,r.useState)(!0),[w,k]=(0,r.useState)(null),[C,P]=(0,r.useState)({page:1,limit:12,total:0,totalPages:0}),S=()=>({category:g.get("category")||void 0,subcategory:g.get("subcategory")||void 0,search:g.get("search")||void 0,minPrice:g.get("minPrice")?Number(g.get("minPrice")):void 0,maxPrice:g.get("maxPrice")?Number(g.get("maxPrice")):void 0,material:g.get("material")||void 0,organicCertified:"true"===g.get("organicCertified"),featured:"true"===g.get("featured"),sort:g.get("sort")||"created_at",page:g.get("page")?Number(g.get("page")):1,limit:12}),_=e=>{let s=new URLSearchParams;Object.entries(e).forEach(e=>{let[t,a]=e;null!=a&&""!==a&&s.set(t,String(a))}),p.push("/products?".concat(s.toString()))},E=async()=>{try{N(!0),k(null);let e=S(),s=await i.F.getProducts(e);v(s.products),P(s.pagination)}catch(e){k("Failed to load products. Please try again."),console.error("Error loading products:",e)}finally{N(!1)}},L=async()=>{try{let e=await i.F.getCategories();f(e.categories)}catch(e){console.error("Error loading categories:",e)}},M=e=>{_({...S(),...e,page:1})};return((0,r.useEffect)(()=>{L()},[]),(0,r.useEffect)(()=>{E()},[g]),w)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:w}),(0,a.jsx)("button",{onClick:E,className:"btn btn-primary",children:"Try Again"})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sustainable Textiles"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Discover our premium collection of eco-friendly and organic textiles"})]})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsx)("div",{className:"lg:w-1/4",children:(0,a.jsxs)("div",{className:"sticky top-8",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(o,{initialValue:S().search||"",onSearch:e=>M({search:e})})}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(d,{categories:j,selectedCategory:S().category,selectedSubcategory:S().subcategory,onCategorySelect:(e,s)=>M({category:e,subcategory:s})})}),(0,a.jsx)(c,{filters:S(),onFilterChange:M})]})}),(0,a.jsxs)("div",{className:"lg:w-3/4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:(null!==(e=null==C?void 0:C.total)&&void 0!==e?e:0)>0?"".concat(null!==(s=null==C?void 0:C.total)&&void 0!==s?s:0," products found"):"No products found"}),S().search&&(0,a.jsxs)("p",{className:"text-gray-600 mt-1",children:['Search results for "',S().search,'"']})]}),(0,a.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,a.jsxs)("select",{value:S().sort,onChange:e=>M({sort:e.target.value}),className:"select select-bordered w-full sm:w-auto",children:[(0,a.jsx)("option",{value:"created_at",children:"Newest"}),(0,a.jsx)("option",{value:"price_asc",children:"Price: Low to High"}),(0,a.jsx)("option",{value:"price_desc",children:"Price: High to Low"}),(0,a.jsx)("option",{value:"name_asc",children:"Name: A to Z"}),(0,a.jsx)("option",{value:"name_desc",children:"Name: Z to A"}),(0,a.jsx)("option",{value:"popularity",children:"Most Popular"})]})})]}),y?(0,a.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,a.jsx)(x.Z,{})}):b.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:b.map(e=>(0,a.jsx)(n.Z,{product:e},e.id))}),(null!==(t=null==C?void 0:C.totalPages)&&void 0!==t?t:0)>1&&(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(m.Z,{currentPage:null!==(u=null==C?void 0:C.page)&&void 0!==u?u:1,totalPages:null!==(h=null==C?void 0:C.totalPages)&&void 0!==h?h:1,onPageChange:e=>{_({...S(),page:e})}})})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 mb-4",children:(0,a.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Try adjusting your filters or search terms"}),(0,a.jsx)("button",{onClick:()=>{p.push("/products")},className:"btn btn-primary",children:"Clear Filters"})]})]})]})})]})}function h(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(x.Z,{}),children:(0,a.jsx)(u,{})})}},5240:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(7437);function r(e){let{currentPage:s,totalPages:t,onPageChange:r}=e;return t<=1?null:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>r(s-1),disabled:1===s,className:"btn btn-sm btn-outline",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(()=>{let e=[];if(t<=5)for(let s=1;s<=t;s++)e.push(s);else if(s<=3){for(let s=1;s<=4;s++)e.push(s);e.push("..."),e.push(t)}else if(s>=t-2){e.push(1),e.push("...");for(let s=t-3;s<=t;s++)e.push(s)}else{e.push(1),e.push("...");for(let t=s-1;t<=s+1;t++)e.push(t);e.push("..."),e.push(t)}return e})().map((e,t)=>(0,a.jsx)("button",{onClick:()=>"number"==typeof e&&r(e),disabled:"..."===e,className:"btn btn-sm ".concat(e===s?"btn-primary":"..."===e?"btn-disabled":"btn-outline"),children:e},t)),(0,a.jsx)("button",{onClick:()=>r(s+1),disabled:s===t,className:"btn btn-sm btn-outline",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}}},function(e){e.O(0,[624,162,971,117,744],function(){return e(e.s=6039)}),_N_E=e.O()}]);